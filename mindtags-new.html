<!DOCTYPE html>
<html lang="en">
<head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><title>MindTags</title><style>*{margin:0;padding:0;border:0;box-sizing:border-box;letter-spacing:.01em}.trashtag{text-decoration:underline;text-align:right;display:block;width:2em;height:2em;bottom:1em;position:relative;float:right}html{font-size:min(4vw,18px);font-family:Helvetica,Arial,sans-serif}h1{font-weight:700}h1,h2,h3,h4,h5{padding-top:.5em;margin-bottom:-.8em}#settingstitle,#viewtitle,.preview h1,.preview h2,.preview h3,.preview h4,.preview h5{margin-bottom:0}ol ol{list-style-type:lower-alpha}ol ol ol{list-style-type:lower-roman}ol,ul{padding:0;padding-left:1.3em;border-top:0 solid #ddd;border-bottom:1px solid #ddd;border-left:1px solid #ddd;background-color:rgba(0,0,0,.08)}ul li{list-style-type:square}li{background-color:#f4f4f4;border-top:1px solid #ddd;padding-left:.2em}li:hover{background-color:#fff}hr{margin-top:.3em;margin-bottom:.3em;border:1px solid #000}.posttitle{padding-top:0}body{width:100%;height:96%;overflow-y:hidden}#main{margin-top:0;height:100%;width:100%;overflow-y:hidden}#results{padding-bottom:50vh}.tbar{position:relative;top:0;height:2.1em}#exporttext,#importtext{overflow-y:scroll;padding-bottom:20vh;font-size:1em;background-color:#fff;margin:.5em;width:90%;border:1px solid #555}#aform,#edittext,#edittitle,#home,#save,#sbox,#settingtitle,#sform,#viewtitle{width:100%}#add{cursor:pointer;border-left:1px solid #aaa;width:5rem;font-size:1.5em}#gear{width:5rem}#gear svg{cursor:pointer;height:70%}#save{cursor:pointer;border-left:1px solid #aaa;width:5rem;height:100%}#save svg{height:100%}#edit svg{transform:scale(.8)}#bhash,#thash{padding:0;font-family:sans-serif}#bhash,#sclear,#thash{background-color:#fff;cursor:pointer;font-weight:700;text-align:center;width:2.5rem;vertical-align:middle;font-size:1.5rem}#bhash{position:absolute;right:3em}#sclear{height:auto;vertical-align:middle;color:#bbb}#sform *{display:inline-block}#sbox{display:flex;font-size:1em;height:2.1em}#stext{overflow-x:scroll;width:100%;padding:.2em 0 .2em 0;font-size:1.5em;border-left:1px solid #aaa}#abox{display:flex;font-size:1em;height:2.1em}#aform{position:fixed;bottom:0;border-top:1px solid #888}#atext{width:100%;overflow-x:scroll;padding:.2em;padding-right:1.5em;font-size:1.5em}#edittitle,#settingtitle,#viewtitle{font-size:min(9vw,4em)}#edittext,#viewtext{font-size:min(5vw,1.5em);word-break:break-word}.preview{font-size:1.2em;cursor:pointer}#home{padding-bottom:3em;padding-top:0;font-size:1.5em;width:100%;height:auto;background-color:#eee}#homebody{padding:.5em}#editbox,#settings,#viewbox{height:100vh;top:0;left:0;position:absolute;width:100%;overflow-y:scroll;padding-top:6vh;padding-bottom:20vh}#settings .content{font-size:1.5em}#settings input{border:1px solid #555}#copydown,#edit,#pullup,#viewgear,#viewshare,#viewtrash,.checkmark,.close{width:1em;display:inline-block;text-align:center;cursor:pointer}.icons{font-size:2.5em;top:0;right:0;position:fixed;width:auto;text-align:right}#copydown,#pullup{height:100%}.checkmark{height:100%}#editbox{height:100vh;overflow-y:hidden}#edittitle{overflow-x:scroll}#edittext{margin-top:.3em;height:65vh;overflow-y:scroll;padding-bottom:10vh;font-size:1.5em}#editcontent{padding:.5em;padding-bottom:0}#settingsfilename,#settingsnewtag,#settingsoldtag{margin:.5em;font-size:1em;border:1px solid #ccc}.settingsbtn{margin:.5em;font-size:1em;border:1px solid #999;padding:.5em}.settingsUpload{margin:.5em;font-size:1em;border:1px solid #999;padding:.5em}.settingsinput{margin:.5em}.preview{padding:.2em;display:block;overflow-y:hidden;overflow-x:hidden;height:4em;border:1px solid #ccc;border-bottom-color:#555;background-color:#f2f2f2}.preview .posttext{color:#666}.text{background-color:#ddd;border-bottom-color:#888}.sloppy{color:#666;border-bottom-color:#bbb;background-color:#ccc}.preview .formatted{color:#666}#notag{font-size:1.3em;padding:.5em}#notag a{color:#fff;cursor:pointer;text-decoration:underline}.rank{width:7%;margin-right:-7%;display:block;padding-top:1.2em;padding-bottom:1.2em;text-align:center;float:left;cursor:pointer}.rank:hover{color:#ccc}.hide{display:none}#homeeditbtn,#homeupdatebtn{position:fixed;bottom:3em;right:1.5em;display:block;width:2em;height:2em;cursor:pointer}#homeedittext{width:100%;font-size:1em;min-height:70vh;background-color:#fff;padding:.3em 0 .3em 0;form-sizing:auto}#homebody a,#settings a,#viewtext a{text-decoration:underline;color:#555;cursor:pointer}a{color:#555}#viewtrash{color:#000}#homebody,#homeedittext,#results{overflow-y:scroll;height:100vh;padding-bottom:50vh}#homeedittext{padding-top:3em;margin-top:-2.8em}.tagstyle{color:"#333"}.bbar{position:fixed;bottom:0;z-index:99}#main{position:fixed;top:-2.1em;height:100vh;margin-bottom:2.1em;margin-top:4.17em;border-top:1px solid #000}.tbar{position:fixed;top:0}.bbar{position:fixed;bottom:0}#sbox{border-bottom:2px solid #000}html{background-color:#bbb}#main{background-color:#888;background-color:transparent;width:100%}.tbar{background-color:#999;width:100%}.bbar{background-color:#ddd;width:100%}#sform{background-color:#ccc}#aform{background-color:#ccc}#viewbox{background-color:#eee}.content{padding:.5em;padding-bottom:3em}#editbox{background-color:#ddd}#edittext,#edittitle{background-color:#eee}#settings{background-color:#eee}#settings h2{padding:.5em .5em .5em .2em;margin-bottom:-.5em}#importfile{max-width:90%}button{background-color:#ddd;cursor:pointer}button:hover{background-color:#eee}button:active{background-color:#ccc}#sclear{color:#bbb}#thash{color:#555}#bhash{color:#555;background-color:transparent}#more{color:#444}</style></head>
<body>
<div id='data' class='hide'><script>
let home = "\n= MindTags\n\nYour //highly organized// **digital brain**!\n\n**MindTags** is a general organization tool using hashtags that's made to minimize button presses and keep track of which context you're operating in. It's specifically made to facilitate the #distributionNetwork as described below, but it can be used for anything.\n\nThe form at the bottom of the page is always available so you can add new notes at any time, even while you're editing other notes. The \"#\" symbol in the search bar just types a \"#\" symbol and initiates the \"hashtag search\". The \"#\" in the add note box at the bottom of the screen inserts whatever hashtags are in your current search query so you can easily add notes within a searched \"context\".\n\n\n== Contexts\n\nA \"context\" is whichever hashtags or other search terms you've put in the search bar. The search remains the same as you open, close, and enter new notes, so you can keep track of what you're focusing on.\n=== examples:\n[[#todo #now]]\n#observation(s)\n#project(s)\n\n=== #duplicate(s)\nWhen notes are imported with the same title as an existing note, but has different content in the body, it will be imported alongside the original note of the same name by just adding #duplicate to the title. It's good to comb through and sort out these conflicts as soon as you import notes.\n\n== Mind Flow\n\n#thought > #idea > #todo > #done\n\nThis is a generic workflow to get you started getting your mind organized. Capture every #thought, sub-categorized with secondary hashtags. Comb through your thoughts to find patterns and make connections, and write down those more fully formed thoughts as #idea(s). Ideas inspire action, whether it be creating an event, building something, or writing a more formal article about the idea itself just to share the concept with others. Ideas spawn #todo lists, and todo lists turn into #done lists one item at a time. Just change the #todo tag to #done.\n\n== Projects\n\nProjects are basically categories to organize todo lists. Just create a new tag for each new project to keep those todo tasks bundled together.\n#project\n\n----\n\n= Distribution\n\nAre you one of those people with drawers of rubber bands, cupboards full of plastic bags, and closets full of carboard boxes, because you can't bring yourself to waste it by throwing it away?\n\nThen you've come to the right place!\n\nWe're systematically organizing, categorizing, and distributing resources to wherever they're needed, without allowing money to ever affect the process.\n\n== Work Flow\n\nThese are the phases of distribution. **Gather** resources, **process** them into usable parts, then use the parts to **create** stuff.\n\n* [[#distribution #gather]]\\\\Collecting resources\n* [[#distribution #process]]\\\\Dismantle, process and categorize.\n* [[#distribution #create]]\\\\Make stuff.\n* [[#distribution #tutorial]]\\\\How to make stuff.\n* [[#distribution #distribute]]\\\\Distribute according to [[fractal generosity]].\n\n== Components\n\nThese are the physical items categorized by type and organized by location.\n* [[#distribution #found]]*\n* [[#distribution #material]]\n* [[#distribution #item]]\n*A **//found//** item is just a //consumer item//, differentiated from an //actual// [[#distribution #item]] which is a finished product created by the distribution network using raw #material.\n\nTheir locations:\n* [[#distribution #stashspot]]\n\n== Knowledge Sharing\n\nThese are the lessons and tutorials we share to teach each other better ways of doing things:\n* [[#distribution #tutorial]]\n\nThese are your contacts in the distribution network:\n* [[#distribution #contact]]\n\nYou can easily share a selection of notes using mindtags. Exporting notes only exports those notes which match your current search criteria, so you can search a certain hashtag or whatever it is you want to share with someone, and then just export those notes for them to import into //their// mindtags.\n\nNotes are exported as a simple text file with the JSON representation of the notes you chose to share, and can be easily imported into another mindtags.\n\nTo share notes, go to the settings **gear icon** on the top-left, and scroll down to \"Export\". This will only export whichever notes match your last search. For instance, you can easily share all your stashspots with someone else by just searching \"[[#stashspot]]\" and exporting only those notes. Or you can share just your \"[[#lowpriority #stashspots]]\" with some people, and \"[[#highpriority #stashspots]]\" with people you really trust to follow the principles of [[fractal generosity]]. Or you can just share all your tutorials about how to build stuff from scratch by exporting [[#distribution #tutorial]].\n\n----\n\n= MindTags: How-To\n\nMindTags uses an oversimplified WikiCreole syntax.\n\nTo see and edit the syntax directly, just click the pencil icon floating on the bottom-right corner of the homescreen.\n\n= Examples:\n\n== header 2\n=== header 3\n====== header 6\n== Formatting:\n\nThis is **bold**.\nThis is //italics//.\nThis is **//both//**.\n\n== Lists:\n\nThere are bullet points, and ordered lists.\n\n* point A\n* point B\n** sub-point\n*** sub-sub-point\n\n# point A\n# point B\n## sub-point\n### sub-sub-point\n\nThey can be mixed and matched visually, kind of.\n\n* example\n## example\n## example\n# example\n# example\n## example\n** example\n** example\n# example\n\n== Links:\n\nLinks only become external links when they begin with \"http\".\n\nExample:\nhttps://lessismore.dev/\n\nThere is no way to mask the link with hypertext, in the interest of transparency.\n\nEvery other [[link]] on MindTags is just a search.\n\nHashtags like #todo become links automatically.\n\nReference tags work for linking to hashtags without tagging that particular note with that hashtag:\n* Use @todo instead of #todo to link to a tag without tagging the note.\n\nTo create a link of multiple hashtags just use the link syntax:\n[[#todo #now]]\n\nYou can also mix and match hashtags with reference tags:\n[[#todo @now]]\nAll reference tags are converted to normal tags in the search bar.\n\n== Extras:\n\nTo force a line-break in the middle of something you can use two backslashes. This allows forcing line-breaks in the middle of bullet points:\n\n* **Title Card**\\\\This is the description below the title, to emulate a \"card\" using a bullet point and a line-break.\n\nThen there's also a horizontal line symbol that is useful for separating sections like these:\n\n----\n=== Purpose:\n\nThe purpose of this note.\n----\nThis would be the body of the note.\n----\n=== Updates:\n\nStuff that happened last.\n----\n\nThis example template structure can be found under [[Template:general]].\n\nTo use any note as a template, simply copy the note to a new note using the \"forward\" arrow.\n\n\n\n\n\n\n\n";
let filename = "mindtags.html";
let posts = [{"title":"Fractal Generosity","text":"When you give to people, **not** according to need, or want, but according to how generous they are - especially favoring those who themselves distribute resources according to [[fractal generosity]].\n\nThe concept of **fractal generosity** is the core principle of our entire #distributionNetwork.\n\n[[#distribution #concept]]\n\n----\n=== Purpose:\nThe purpose of Fractal Generosity is to break out of the [[Charity Cycle]] and defend [[Protected Value]].\n----\n\n**Fractal Generosity** means giving more to those who give more. Being the most generous to the most generous. Paying it forward to those who will pay it forward to those who will pay it forward.\n\nLiving according to fractal generosity, we no longer are forced to choose between being needy or greedy. We encourage and reward generosity, not just with a pat on the back, but also with more material wealth. But being so generous, the most generous people will pass on most of what they receive. This forms lines of distribution which prioritize, encourage, and even reward generosity itself. This way we can defend our [[Protected Value]], break out of the [[Charity Cycle]], and empower the gift economy to be something we can actually depend on.\n\nPrioritize giving the most, and the most often, to those who are the most generous and who pass on the most - especially those who themselves follow this principle and prioritize the most generous."},{"title":"#distribution #gather","text":"Finding and collecting resources.\n\nItems may be listed as the titles of notes, and that note marked with #gather to indicate that they are something that is gathered. It does not mean it needs to be gathered, nor does it indicate whether it is often or rarely gathered. Just that it is something that can be gathered.\n\nSometimes a note marked as a raw @material will also be tagged #gather, because some raw materials are gathered in their raw form. But many gathered items still need to be processed before they are in their most useful raw form, so it's not always the case.\n\nRemember, items marked #gather are things which //can// be gathered. They are generic reminders of what sorts of materials we have to draw on from the world around us. However, actual physical items that exist and are stored in a location are marked as items such as @found, @item, or @material, as well as the tag associated with their location, and other tags categorizing the items."},{"title":"#distribution #process","text":"Dismantling into parts or otherwise separating components into raw materials.\n\n[[#distribution #process]]\n\nItems marked for processing are typically ready for @repair or ready to @dismantle into parts. Other tags may be needed for other things, such as processing grain into flour.\n\nThe most important thing to do before removing the #process tag from an item is to be sure it's been properly categorized with all the relevant and appropriate hashtags so it doesn't just get lost in the gulags of the distribution network."},{"title":"#distribution #create","text":"Using raw materials to create finished products.\n\n[[#distribution #create]]\n\nWhen creating something, it's good to take notes on how it's going, and what you need to continue. Take stock of what supplies are needed, or were needed, and what went wrong. These projects and lists can be marked #create. This helps keep track of how to do things, and remember how you've done things before, what went wrong, and how you could do it better.\n\nLater, if a project was successful, a project tagged #create can be reformatted and reorganized to turn it into a @tutorial to share with other people!"},{"title":"#distribution #distribute","text":"Distribute according to the principle of fractal generosity.\n\n[[#distribution #distribute]]\n\nOnce something is marked to #distribute, it's either given away according to the principles of [[fractal generosity]], or it's given away through the [[generosity game]].\n\nTypically what happens is people share hashtags for whole stashspots with each other, which includes all the items stored in that location. This is only done with trusted comrades - people who understand and follow the principles of [[fractal generosity]].\n\nThis means everyone has a complete inventory of the stashspots they do have access to, and as they become more trusted in the network they gain access to still more stashspots. Then they can simply search @distribute to find items that are ready to be taken.\n\nYou can also help with other things a stashspot needs by reading through it's related notes. You might help with the processing of any stashspot you have access, helping repair and dismantle things as needed. But if you didn't start the stashspot, be sure to communicate with whoever shares the stashspot with you before you start doing anything so you don't overstep your welcome or mess up their process."},{"title":"#distribution #found","text":"A found item that could be repaired, dismantled for parts, or used as-is.\n\n[[#distribution #found]]\n\nTypically, this is really just anything coming in from @gather that hasn't been analyzed and categorized, yet.\n\nThe most important thing for any #found item is to mark it with it's related @stashspot location, or wherever it is, right away.\n\nNext most important thing is to mark it for processing, right away. To mark a found item for processing (typically either to @repair or @dismantle it in some way), just add @process to the note. From there it can be further categorized."},{"title":"#distribution #material","text":"A basic component with which to create other things. (Raw materials.)\n\n[[#distribution #material]]\n\nThese materials are typically categorized and sub-categorized to a great degree, to keep everything organized. They'll be tagged according to size, shape, type of material, topics they relate to, what they're used for, etc.\n\nThe more tags the better, for these materials, to keep everything as organized as possible.\n\nTry to keep **quantities** listed on the first line of the note, so you can see it from the search page."},{"title":"#distribution #item","text":"A homemade finished product.\n\n[[#distribution #item]]\n\nThese can be distributed directly to people you know, according to the principles of [[fractal generosity]], or they could be circulated via the [[generosity game]].\n\nAn item you created that you've labeled [[#distribution #item]] is a finished product ready to be distributed, so just add the hashtag @distribute to mark the item for distribution.\n\nThese items are typically categorized and sub-categorized to a great degree, to keep everything organized. They'll be tagged according to size, shape, type of material, topics they relate to, what they're used for, etc.\n\nThe more tags the better, for these items, to keep everything as organized as possible.\n\nTry to keep **quantities** listed on the first line of the note, so you can see it from the search page."},{"title":"#distribution #stashspot","text":"A storage place for any @material, @found item, or homemade @item to be stored.\n\n[[#distribution #stashspot]]\n\nEvery #stashspot should have it's own hashtag, so any item can be easily tagged with any location.\n\nThe note announcing the hashtag for a stashspot should be marked #stashspot, so you can very easily list all stashspots at once by searching #stashspot. However, do not mark any items or other notes with #stashspot - instead, only mark them with that hashtag that represents the relevant stashspot. This way #stashspot acts as a table of contents for all your stashspots without getting cluttered with items. This will keep your notes most organized."},{"title":"Generosity Game","text":"A method for circulating resources without money.\n#giftnote #gifteconomy\n#distributionNetwork\n\nThe Generosity Game is a system designed to circulate resources widely without relying on money. It involves the use of \"gift notes\", which are pieces of paper that promise to provide goods or services to the recipient.\n\nThe more gift notes someone passes on, the more the community is willing to give them, because they can be trusted to keep the gift notes circulating. So it's a self-balancing system where everyone is encouraged to be more generous. The more generous you are, the more access to resources you have!\n\n== The Rules\n\n* These gift notes **cannot** be traded, and the items and services received **must not** be sold or monetized in any way. If you do that, you will stop receiving gift notes. The purpose of gift notes is to **protect** our [[Protected Value]] from being absorbed by capitalism. These gift notes are simply passed on from person to person until it reaches someone who decides to redeem the gift note for that item or service.\n* You must pass on //at least// **9 out of 10** gift notes. In general, you should try to pass on many more than that so you don't have to keep count so closely. And the more you pass on, the more you receive, anyways.\n* You **must** pass on the first 9 gift notes you receive, without taking one. This is like the \"buy in\", and an initial test of your commitment.\n* These gift notes must be passed on according to the principle of [[Fractal Generosity]], prioritizing giving the most gift notes to people who pass on the most gift notes. The more gift notes you pass on, the more you receive, simple as that. This ensures wealth spreads out among everyone rather than accumulating with greedy people.\n* Do not give someone gift notes when they give you gift notes. They must flow in a circular pattern, and cannot be given back and forth. Always try to find a third person to return the system to a circular flow. \"Back and forth\" movement cannot be trusted, since it could become a transactional barter relationship. Anyone participating in back-and-forth exchanges will likely stop receiving gift notes from others.\n* Anyone can make a gift note and pass it on.\n\nGift notes are not given to someone to say \"thank you\" for what they've given you, as that would be similar to a trade, but rather they are given to say \"thank you\" for how well they give to others. In that sense, they are impersonal. **See past the people, and just reward generosity itself.**\n\n**But still maintain relations.** For your friends and loved ones who you feel you cannot invite to play the game because they \"monetize\" everything they touch, just don't give them any gift notes. You can still give to and share with someone who is still invested in the capitalist system, just don't give them stuff you received from the distribution network. Don't take stuff out of the gift stream just to put it back into serving capitalism. But don't cut yourself off from others, either.\n\n== Gift Notes\n\nEach gift note contains three things:\n* A description of the offered item or service.\n* An expiration date, to encourage circulation, and so the issuer can re-issue the same gift note on that date if they haven't heard back.\n* The issuer's contact information so the recipient can contact them.\n\nTo maintain the value of gift notes, it's crucial for issuers to honor their promises. Those who don't risk receiving fewer gift notes in the future.\n\n=== Physical Paper!\n\nIt's important that these gift notes are **not digitized**, because not everyone has a device. For this system to really benefit those with the most need, inspiring them to create for each other and become a part of a system where they're well taken care of and feel like they're contributing, it's important that they remain simple pieces of paper so they can easily flow among people who might not own any electronics.\n\n== Getting Started\n\nIt can be difficult to get gift notes to catch on in your area if you're the first one to hear about it. There is no one right way to get gift notes going in your area. It may take on different shapes and customs according to the community. Here are some ideas to get you started.\n\n=== Making your first gift note:\n\nAll you need is some paper and a pen or a crayon or whatever you can find to write on it. Write the description, expiration, and contact information clearly and legibly. Then, if you're feeling up to it, add some decoration like a pretty border! It's fun to decorate them, or put art on them, to beautify the whole game for everyone.\n\n=== Start small:\n\nThe gift notes don't have to be very valuable, at first. Give away used items that you need to get rid of. Offer to do stuff that's not that hard. If you already have a skill you're really good at, you might find it relatively effortless to offer that. If you're a bike mechanic, you can offer a quick tune-up. If you're a barber you might offer a haircut. Be sure to offer things that don't cost you any money, and don't overextend yourself.\n\nRemember, at first you're just **testing the waters**. You're seeing if people will actually pass on at least 90% of the gift notes they receive. You're giving gift notes to various people and then observing who ends up calling you for your work and who they got their gift note from and how it got from you to them. With a light touch of gossip, it's easy to figure out how the gift notes are flowing, and adjust accordingly to be sure your gifts are serving generosity instead of greed. As distribution lines become better established as part of a virtuous cycle that serves to encourage the flow of resources and generosity, and you become more trusting of your direct contacts in the distribution network, you will feel more at ease to continue to increase the time and effort you put into the Generosity Game knowing that what goes around truly does come back around.\n\n=== Homeless, first:\n\nIf there are homeless people in your area, see if they're interested. Homeless people already form networks and gift economies of their own, but they often remain limited by their perspective that money is what they need to survive. This means countless hours are wasted applying to jobs that never hire you, and walking back and forth across town because you heard about some opportunity that doesn't work out, for weeks on end. Sometimes it's just too hard to appear clean enough at just the right time, and all is for nothing. People get worn out from all the work they're putting in, and see nothing in return for all their effort. This steadily wears down people's bodies and spirits until they fall into some deep, dark hole. They put in so much work, and get nothing in return, and are still blamed and ridiculed by society, so they internalize this as self-hatred and self-loathing and turn to drugs or other addictions.\n\nYet, at the same time, many homeless people have lots of skills and resources to offer, but they just have no way to offer it. They can't afford the \"peddlar's license\", they have trouble keeping a schedule, or otherwise can't play the part of being fake for mainstream society. Yet, why not work for each other? The reason is that homeless people rarely have much money to offer each other. A homeless camp may have both someone who needs a haircut, and someone who knows how to cut hair, but their skills and needs never connect because they're constantly distracted by want of money, and constantly being scattered and disorganized by the police so they can't establish community. They're forced to continue to focus on the fruitless pursuit of trying to make money instead of just doing things for each other. After all, why do something for another homeless person if they can't pay you for it?\n\nThe Generosity Game can help organize people so that these skills aren't going to waste, and homeless people can actually benefit materially from their contributions and kindness because in the Generosity Game what goes around actually does come back around. They may not receive money for giving someone a haircut, but the more haircuts they give, the more gift notes they'll get from other people in their community in the future.\n\n=== Checks and balances:\n\nThere are various ways to scrutinize and observe each other to discern who is passing on more or less gift notes. But do not get so hung up on it that you just stop circulating gift notes, because this will be one of the various attacks the capitalists could use to derail our system. If you feel very unsure about someone, don't give them gift notes. Get to know people. Then, once you're pretty sure they understand the game and the concept of Fractal Generosity, just start small. A gift note can range in value from a pack of gum to a new house. If you trust someone enough to invite them into the game, but you're still figuring out just how generous they really are, just pass on gift notes that aren't such a big loss to our protected value if they are monetized. Once someone continues to prove themselves as being generous with their gift notes, they will continue to receive more and more valuable gift notes from the gift stream."},{"title":"Charity Cycle","text":"Charity keeps us trapped in the cycle.\n#distribution #concept\n#distributionNetwork\n\nThe whole concept of charity is that you only give it to people when they're **in need**. But who really doesn't need anything, and where do we draw the line?\n\nIn reality, these mind games mean that, unless you're //seriously impoverished//, you're generally discouraged from receiving gifts, and more or less cut off from truly experiencing the gift economy.\n\nThe **Charity Cycle** refers to the cycle of falling in and out poverty because of how we've psychologically linked the gift economy with **//shame//**. We feel ashamed to receive anything for free, so we constantly seek to make more money and rise further out of the gift economy. To \"get out of poverty\". To one day proudly //no longer rely on the gifts of others//.\n\nReality Check: [[We all rely on the gifts of others]].\n\n== The Dream\n\nThis is why the **charity cycle** is actually keeping capitalism afloat, and preventing the gift economy from developing. It's almost like, once the system has truly failed people, charity comes along and tries to bribe you into believing that the system still works, and that with a little help maybe you can still get back up into the capitalist pyramid scheme.\n\nThis story of one day getting rich again prevents anyone from just focusing on //**making it easier to be poor**//, which is exactly what the gift economy does. Instead of producing for each other within the paradigm of the gift economy, we instead take the first opportunity to sell our labor to companies in exchange for money.\n\nThis is why no amount of charity will ever create the gift economy. And this is why this subject must be understood by participants - because anyone who doesn't understand the difference between charity and the gift economy will inevitably view the gift economy as a charity for the limited time they don't have enough money, but then once the gift economy has lifted them up out of desperation, they're liable to pivot to putting all their time and energy back into the market economy in exchange for money, and won't necessarily put anything back into the gift economy because that means \"working for free\".\n\n== Conclusion\n\nThe concept of **charity** still exists within the **exchange** paradigm. For rich people, **charity trades money to alleviate guilt**. It is buying the right to feel less guilt for having so much more than other people. For the poor, **charity trades hunger for shame**. We must satisfy hunger, but in terms of charity, we cannot satisfy that hunger without feeling ashamed.\n\nWe may no longer feel hunger, but since we're expected to only receive charity when we're really in need, and expected to go make money if we're able to, the charity comes at the cost of feeling separated from mainstream society, we feel a loss of dignity in the sense that we're being seen as someone who doesn't contribute, and we feel ashamed for receiving the gifts without having anything to give back.\n\nWhile charity is good, because it keeps people afloat when they have very little, the concepts around charity will actually prevent the gift economy from ever growing beyond the bare minimum of taking care of people in poverty. This is why **distribution** is predicated on a philosophy of [[Fractal Generosity]] - in contrast to **charity**.\n\nTaking care of each other can't be compartmentalized into a weekend activity at the local soup kitchen. It has to become a way of life. It has to take priority over everything else, //especially// money."},{"title":"#distributionNetwork","text":"The online hashtag for the Distribution Network.\n\n#distributionNetwork\n\nAlso: [[r/distributionNetwork]]\n\nThe #distributionNetwork hashtag represents this entire distribution system. That includes using this MindTags app as a sort of decentralized inventory, using our @stashspot(s) as a sort of decentralized hardware store, and using [[fractal generosity]] as a guiding principle for who to share which @stashspot(s) with. This way we can collectively gather, dismantle, and build anything we need. It's basically like a collectively maintained, decentralized, Library of Stuff.\n\nAnd due to the benefits of [[fractal generosity]], we are actually rewarded for our participation in the network by gaining more access to the network, making more connections, and gaining access to more stashspots.\n\nThe #distributionNetwork also recommends the [[Generosity Game]] as a more stable and continuous method of circulating resources in a way that continuously encourages and rewards generosity.\n\nThis hashtag is used on reddit, youtube, and wherever there are hashtags.\n\n\n\n= Distribution\n\nAre you one of those people with drawers of rubber bands, cupboards full of plastic bags, and closets full of cardboard boxes, because you can't bring yourself to waste it by throwing it away?\n\nThen you've come to the right place!\n\nWe're systematically organizing, categorizing, and distributing resources to wherever they're needed, without allowing money to ever affect the process.\n\n== Work Flow\nThese are the phases of distribution. Gather resources, process them into usable parts, then use the parts to make stuff.\n\n* [[#distribution #gather]]\\\\Collecting resources.\n* [[#distribution #process]]\\\\Dismantle and categorize.\n* [[#distribution #create]]\\\\Make stuff.\n* [[#distribution #tutorial]]\\\\How to make stuff.\n* [[#distribution #distribute]]\\\\Distribute according to [[fractal generosity]].\n\n== Components\nThese are the physical items categorized by type and organized by location.\n* [[#distribution #found]]*\n* [[#distribution #material]]\n* [[#distribution #item]]\n*A //**found**// item is just a //consumer item//, differentiated from an //actual// [[#distribution #item]] which is a finished product created by the distribution network using raw #material.\n\nTheir locations:\n\n* [[#distribution #stashspot]]\n\n== Knowledge Sharing\n\nThese are the lessons and tutorials we share to teach each other better ways of doing things:\n\n* [[#distribution #tutorial]]\n\nThese are your contacts in the distribution network:\n\n* [[#distribution #contact]]\n\nYou can easily share a selection of notes using mindtags. Exporting notes only exports notes which match your current search criteria, so you can search a certain hashtag or whatever it is you want to share with someone, and then just export those notes for them to import into their mindtags.\n\nNotes are exported as a simple text file with the JSON representation of the notes you chose to share, and can be easily imported into another mindtags.\n\nTo share notes, go to the settings **gear icon** on the top-left, and scroll down to \"Export\". This will only export whichever notes match your last search. So you can easily share all your stashspots by searching #stashspot and exporting only those notes. Or you can share all your notes tagged \"[[#lowpriority #stashspot]]\" with //anyone//, but only share \"[[#highpriority #stashspot]]\" with people you really trust to follow the principles of [[fractal generosity]]. Or you can share all your tutorials about how to build stuff from scratch by exporting [[#distribution #tutorial]]."},{"title":"Protected Value","text":"Protecting collective value from being absorbed by capitalism.\n#distribution #concept\n#distributionNetwork\n\n**Protected Value** refers to value circulating within the gift economy which is being protected from being absorbed by the market economy. The way we protect our collective value from being removed from circulation and absorbed into the market is to follow the principles of [[Fractal Generosity]] and use various tools such as Tool Libraries and the [[Generosity Game]].\n\nTo profit in the market economy, the goal is to produce something for as cheap as possible, and sell it for as much as possible. This means the best possible scenario is finding free resources to begin with. So the reason it's so hard to recreate the gift economy in a post-industrial capitalist world is because anything and everything can be exploited, treated as capital, and traded as value in the market. That means any value that is circulated within the gift economy is always at risk of becoming capital for the market economy if anyone decides to sell it or trade it.\n\nThis is why any value which is given for free is often just one step removed from being absorbed by the capitalist system. Market pressures are consistently working against us, so protecting value from being absorbed by capitalism has to be an intentional and strategic act that is just as consistent. That's why **fractal generosity** suggests giving intentionally in a way that empowers the gift economy, and creates a virtuous cycle of circulating **protected value** among the community which //never// gets turned back into money."},{"title":"Template:general","text":"A generic template example.\n#template @tag @tag\n----\n== Purpose:\n\nThe purpose of this note or activity.\n----\nThis would be the body of the note.\n----\n== Updates:\n\nStuff that happened last.\n----"},{"title":"#distribution #tutorial","text":"Tutorials related to #distribution.\n\n[[#distribution #tutorial]]\n\nTypically a tutorial will be created from a @project tagged @create which has already gone successfully. In that case, as the project comes to life, and the details are ironed out, the notes on the project should provide enough information to make a tutorial on the subject.\n\nA @tutorial, therefore, is a well-formatted and more nicely presented explanation of how to do something, with ingredients lists, step-by-step instructions, and \"gotchas\" to look out for along the way.\n\nOf course, you can always just export all your project notes for someone if you haven't gotten around to writing the tutorial, yet. That's just a lot messier, and may make it harder to reproduce the same results."},{"title":"#distribution Chatroom","text":"#distribution #chatroom #irc\nhttps://webchat.oftc.net/?nick=&channels=%23distribution&uio=d4"},{"title":"r/distributionNetwork","text":"A sub-reddit for discussion and inspiration.\n#distributionNetwork\n\n#reddit"}];
let tags = [{"tag":"#template","count":1},{"tag":"#distribution","count":14},{"tag":"#chatroom","count":1},{"tag":"#irc","count":1},{"tag":"#distributionnetwork","count":6},{"tag":"#concept","count":3},{"tag":"#gather","count":2},{"tag":"#process","count":2},{"tag":"#create","count":2},{"tag":"#distribute","count":2},{"tag":"#found","count":2},{"tag":"#material","count":2},{"tag":"#item","count":2},{"tag":"#stashspot","count":2},{"tag":"#giftnote","count":1},{"tag":"#gifteconomy","count":1},{"tag":"#tutorial","count":2},{"tag":"#contact","count":1},{"tag":"#lowpriority","count":1},{"tag":"#highpriority","count":1},{"tag":"#reddit","count":1},{"tag":"#duplicate","count":0}];
</script>
</div>
<div class="tbar"><form onsubmit="return event.preventDefault(),saveWiki()" id="sform" style="border-bottom:1px solid #888;border-top:1px solid #888"><div id="sbox"><button id="gear" onclick="return settings(event)"><svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 1920 1920" xmlns="http://www.w3.org/2000/svg"><path d="M1703.534 960c0-41.788-3.84-84.48-11.633-127.172l210.184-182.174-199.454-340.856-265.186 88.433c-66.974-55.567-143.323-99.389-223.85-128.415L1158.932 0h-397.78L706.49 269.704c-81.43 29.138-156.423 72.282-223.962 128.414l-265.073-88.32L18 650.654l210.184 182.174C220.39 875.52 216.55 918.212 216.55 960s3.84 84.48 11.633 127.172L18 1269.346l199.454 340.856 265.186-88.433c66.974 55.567 143.322 99.389 223.85 128.415L761.152 1920h397.779l54.663-269.704c81.318-29.138 156.424-72.282 223.963-128.414l265.073 88.433 199.454-340.856-210.184-182.174c7.793-42.805 11.633-85.497 11.633-127.285m-743.492 395.294c-217.976 0-395.294-177.318-395.294-395.294 0-217.976 177.318-395.294 395.294-395.294 217.977 0 395.294 177.318 395.294 395.294 0 217.976-177.317 395.294-395.294 395.294" fill-rule="evenodd"></path></svg></button> <input id="stext" oninput="event.preventDefault(),search(this.value)" onkeydown="if(event.key==='Tab'){event.preventDefault();let searchTerms=g('#stext').value.split(' ');let lastTerm=searchTerms.pop();if(tagresults.length>0){let tag=tagresults[0]['tag'];if(tag.toLowerCase().startsWith(lastTerm.toLowerCase())){let completion=tag.substring(lastTerm.length);g('#stext').value+=completion+' ';search(g('#stext').value);}}}else if(event.key==='Enter'){addtags(event);}" autocomplete="off"> <a onclick="return event.preventDefault(),g(&quot;#stext&quot;).value+=&quot;#&quot;,renewSearch(),g(&quot;#stext&quot;).focus(),!(g(&quot;#sclear&quot;).style.color=&quot;#000&quot;)" id="thash">#</a> <a onclick="return event.preventDefault(),g(&quot;#stext&quot;).value=&quot;&quot;,g(&quot;#stext&quot;).focus(),renewSearch(&quot;&quot;),!(this.style.color=&quot;#BBB&quot;)" id="sclear" style="color: rgb(187, 187, 187);">Ã—</a> <button id="save"><svg style="height: 100%; cursor: pointer;" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="Interface / Download"><path id="Vector" d="M6 21H18M12 3V17M12 17L17 12M12 17L7 12" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></button></div></form></div><div id="main"><div id="home" class=""><div id="homeview" class="null"><div id="homebody"></div><a onclick="edithome()" id="homeeditbtn"><svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.65661 17L6.99975 17L6.99975 14M6.10235 14.8974L17.4107 3.58902C18.1918 2.80797 19.4581 2.80797 20.2392 3.58902C21.0202 4.37007 21.0202 5.6364 20.2392 6.41745L8.764 17.8926C8.22794 18.4287 7.95992 18.6967 7.6632 18.9271C7.39965 19.1318 7.11947 19.3142 6.8256 19.4723C6.49475 19.6503 6.14115 19.7868 5.43395 20.0599L3 20.9998L3.78312 18.6501C4.05039 17.8483 4.18403 17.4473 4.3699 17.0729C4.53497 16.7404 4.73054 16.424 4.95409 16.1276C5.20582 15.7939 5.50466 15.4951 6.10235 14.8974Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div><div id="homeedit" class="hide"><textarea id="homeedittext"></textarea> <a onclick="updatehome()" id="homeupdatebtn" class="hide checkmark"><svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 12.6111L8.92308 17.5L20 6.5" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div></div><div id="results"></div></div><div class="bbar"><form onsubmit="return event.preventDefault(),!1" id="aform"><div id="abox" style="font-size:1em;display:inline-flex;width:100%;height:2em"><textarea id="atext" autocomplete="off" onkeydown="&quot;Enter&quot;===event.key&amp;&amp;(event.shiftKey||(event.preventDefault(),post(g(&quot;#atext&quot;).value.trim().replace(&quot;\n&quot;,&quot;\\\\&quot;)),g(&quot;#atext&quot;).value=&quot;&quot;))"></textarea> <a onclick="addtags(event)" id="bhash">#</a> <button id="add" onclick="return event.preventDefault(),post(g(&quot;#atext&quot;).value.trim().replace(&quot;\n&quot;,&quot;\\\\&quot;)),g(&quot;#atext&quot;).value=&quot;&quot;,!1" type="submit" value="+">+</button></div></form></div><div id="viewbox" class="hide"><span class="icons"><a onclick="remove(g(&quot;#viewtitle&quot;).innerHTML)" id="viewtrash"><svg style="transform: scale(.8);" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg></a><a onclick="duplicate()" id="viewshare"><svg style="transform: scale(.8);" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 18.5088C1 13.1679 4.90169 8.77098 9.99995 7.84598V5.51119C9.99995 3.63887 12.1534 2.58563 13.6313 3.73514L21.9742 10.224C23.1323 11.1248 23.1324 12.8752 21.9742 13.7761L13.6314 20.2649C12.1534 21.4144 10 20.3612 10 18.4888V16.5189C7.74106 16.9525 5.9625 18.1157 4.92778 19.6838C4.33222 20.5863 3.30568 20.7735 2.55965 20.5635C1.80473 20.3511 1.00011 19.6306 1 18.5088ZM12.4034 5.31385C12.2392 5.18613 11.9999 5.30315 11.9999 5.51119V9.41672C11.9999 9.55479 11.8873 9.66637 11.7493 9.67008C8.09094 9.76836 4.97774 12.0115 3.66558 15.1656C3.46812 15.6402 3.31145 16.1354 3.19984 16.6471C3.07554 17.217 3.00713 17.8072 3.00053 18.412C3.00018 18.4442 3 18.4765 3 18.5088C3.00001 18.6437 3.18418 18.6948 3.25846 18.5822C3.27467 18.5577 3.29101 18.5332 3.30747 18.5088C3.30748 18.5088 3.30746 18.5088 3.30747 18.5088C3.63446 18.0244 4.01059 17.5765 4.42994 17.168C4.71487 16.8905 5.01975 16.6313 5.34276 16.3912C7.05882 15.1158 9.28642 14.3823 11.7496 14.3357C11.8877 14.3331 12 14.4453 12 14.5834V18.4888C12 18.6969 12.2393 18.8139 12.4035 18.6862L20.7463 12.1973C20.875 12.0973 20.875 11.9028 20.7463 11.8027L12.4034 5.31385Z" fill="#0F1729"></path></svg></a><a onclick="edit()" id="edit"><svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.65661 17L6.99975 17L6.99975 14M6.10235 14.8974L17.4107 3.58902C18.1918 2.80797 19.4581 2.80797 20.2392 3.58902C21.0202 4.37007 21.0202 5.6364 20.2392 6.41745L8.764 17.8926C8.22794 18.4287 7.95992 18.6967 7.6632 18.9271C7.39965 19.1318 7.11947 19.3142 6.8256 19.4723C6.49475 19.6503 6.14115 19.7868 5.43395 20.0599L3 20.9998L3.78312 18.6501C4.05039 17.8483 4.18403 17.4473 4.3699 17.0729C4.53497 16.7404 4.73054 16.424 4.95409 16.1276C5.20582 15.7939 5.50466 15.4951 6.10235 14.8974Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a><a onclick="g(&quot;#checkmark&quot;).classList.add(&quot;hide&quot;),renewSearch(),this.parentElement.parentElement.classList.add(&quot;hide&quot;)" id="close" class="close"><svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="Menu / Close_SM"><path id="Vector" d="M16 16L12 12M12 12L8 8M12 12L16 8M12 12L8 16" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></a></span><div class="content"><h1 id="viewtitle"></h1><div id="viewtext"></div><div id="viewraw" class="hide"></div></div></div><div id="editbox" class="hide"><span class="icons"><a onclick="closeEdit()" id="close2" class="close hide"><svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="Menu / Close_SM"><path id="Vector" d="M16 16L12 12M12 12L8 8M12 12L16 8M12 12L8 16" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></a><a onclick="if(g('#edittitle').value === '') { let content = g('#edittext').value; let firstLine = content.split('\n')[0]; g('#edittitle').value = firstLine; g('#edittext').value = content.substring(firstLine.length + 1); editing(); }; g('#edittitle').focus();" id="pullup"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none" class="feather feather-chevrons-down" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="17 11 12 6 7 11"></polyline><polyline points="17 18 12 13 7 18"></polyline></svg></a><a onclick="g(&quot;#edittext&quot;).value=g(&quot;#edittitle&quot;).value+&quot;\n&quot;+g(&quot;#edittext&quot;).value,g(&quot;#edittitle&quot;).value=&quot;&quot;,editing(),g(&quot;#edittitle&quot;).focus()" id="copydown"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevrons-down"><polyline points="7 13 12 18 17 13"></polyline><polyline points="7 6 12 11 17 6"></polyline></svg></a><a onclick="closeEdit()" id="close1" class="close"><svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="Menu / Close_SM"><path id="Vector" d="M16 16L12 12M12 12L8 8M12 12L16 8M12 12L8 16" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></a><a onclick="event.preventDefault(),g(&quot;#checkmark&quot;).classList.add(&quot;hide&quot;),g(&quot;#close1&quot;).classList.remove(&quot;hide&quot;),g(&quot;#close2&quot;).classList.add(&quot;hide&quot;),update(g(&quot;#viewtitle&quot;).innerHTML,g(&quot;#edittitle&quot;).value,g(&quot;#viewtext&quot;),g(&quot;#edittext&quot;).value)" id="checkmark" class="checkmark hide"><svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 12.6111L8.92308 17.5L20 6.5" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></span><div id="editcontent"><input id="edittitle" oninput="editing()" onkeydown="if(&quot;Enter&quot;===event.key){event.preventDefault();var cursorPos=this.selectionStart;g(&quot;#edittext&quot;).value=this.value.substring(cursorPos)+&quot;\n&quot;+g(&quot;#edittext&quot;).value,this.value=this.value.substring(0,cursorPos),editing(),g(&quot;#edittext&quot;).focus(),g(&quot;#edittext&quot;).setSelectionRange(0,0)}"> <textarea id="edittext" oninput="editing()"></textarea></div></div><div id="settings" class="hide"><span class="icons"><a onclick="this.parentElement.parentElement.classList.add(&quot;hide&quot;)" class="close"><svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="Menu / Close_SM"><path id="Vector" d="M16 16L12 12M12 12L8 8M12 12L16 8M12 12L8 16" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></a></span><div class="content"><h1 id="settingstitle">Settings</h1><hr><h2>Change filename</h2><p class="settingsinput">This is the name of the file you'll re-download whenever you save.</p><form onsubmit="return event.preventDefault(),savesettings()"><input id="settingsfilename"><br><button class="settingsbtn">Save Changes</button></form><hr><h2>Import posts</h2><p class="settingsinput">Select a JSON file exported from another mindtags, to add those posts to this instance of mindtags.</p><form onsubmit="return event.preventDefault(),importNotes()" id="importform"><input id="importfile" accept=".json,.txt" class="settingsUpload" type="file"> <button class="settingsbtn">Import</button><p class="settingsinput"><i><b>Or</b></i> paste the JSON directly into this text box, <i>then</i> click import.</p><textarea id="importtext" placeholder="Insert JSON data..."></textarea><br><button class="settingsbtn">Import</button></form><div id="conflicts"></div><hr><h2>Exporting <i id="exporting">all your posts</i></h2><p class="settingsinput">This exports a JSON file of <b>search results</b>, so you can share select notes.</p><p class="settingsinput">Or clear your search to export <b>all</b> your notes.</p><form onsubmit="return event.preventDefault(),exportWiki()" id="export"><button class="settingsbtn">Export as file</button></form><p class="settingsinput"><i><b>Or</b></i> copy the JSON directly from this text box.</p><textarea id="exporttext"></textarea><p class="settingsinput"><b>WARNING:</b> Websites can capture your 'copied' text without consent, so don't surf the web while you've got all your notes copied.</p><hr><h2>Rename Tags</h2><p class="settingsinput">Rename a tag from one thing to another.</p><p class="settingsinput">This is especially useful just after you've imported someone else's notes, because that way you can rename their tags to your matching tags to suit your own organization method.</p><form onsubmit="return event.preventDefault(),renameTags()" id="renametags"><p class="settingsinput"><b>Old Tag:</b><br><input id="settingsoldtag"><br></p><p class="settingsinput"><b>New Tag:</b><br><input id="settingsnewtag"><br></p><button class="settingsbtn">Rename Everywhere</button></form><hr></div></div><div id="scripts"><script>window.addEventListener('beforeunload',function(e){e.preventDefault();e.returnValue='Are you sure you want to leave this page?'});let saved=!1;let changed=!1;let savedata=localStorage.getItem("home");let allowsave=!0;if(savedata){allowsave=!1;if(confirm("Previous session data found for '"+filename+"'.\n\nLoad previous session?")){allowsave=!0;try{home=savedata;filename=localStorage.getItem("filename");posts=JSON.parse(localStorage.getItem("posts"));if(posts.length==0){posts=[]}
tags=localStorage.getItem("tags")?JSON.parse(localStorage.getItem("tags")):[];if(tags.length==0){tags=[]}}catch(error){alert(error);home="Save data failed to load. Loading defaults.";filename="mindtags.html";posts=[];tags=[]}}else{savedata=!1}}
if(!savedata){alert("Data loaded from file.")}
allowsave=!0;function g(css,parent){return(parent||document).querySelector(css)}
function gg(css,parent){var nodes=(parent||document).querySelectorAll(css);return Array.prototype.slice.call(nodes,0)}
function escapeHTML(htmlStr){if(htmlStr){return htmlStr.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}else{return""}}
function unescapeHTML(htmlStr){htmlStr=htmlStr.replace(/&lt;/g,"<");htmlStr=htmlStr.replace(/&gt;/g,">");htmlStr=htmlStr.replace(/&quot;/g,"\"");htmlStr=htmlStr.replace(/&#39;/g,"\'");htmlStr=htmlStr.replace(/&amp;/g,"&");return htmlStr}
function linkClick(linkText){g('#viewbox').classList.add('hide');g('#stext').value=unescapeHTML(linkText);renewSearch()}
function createLink(match,content){let searchContent=content;searchContent=escapeHTML(searchContent);searchContent=searchContent.replace(/@(\w+)/g,'#$1');let linkContent=content;return `<a onclick="linkClick('${searchContent} ')">${linkContent}</a>`}
g('#settingsfilename').value=escapeHTML(filename);g('#homebody').innerHTML=creolize(escapeHTML(home));g('#homeedittext').value=home;g('#gear').innerHTML=gearSVG();gg('.close').forEach((el)=>{el.innerHTML=closeSVG()});gg('.checkmark').forEach((el)=>{el.innerHTML=checkmarkSVG()});g('#homeeditbtn').innerHTML=pencilSVG();g('#edit').innerHTML=pencilSVG();g('#viewtrash').innerHTML=trashSVG();g('#viewshare').innerHTML=shareSVG();g('#save').innerHTML=downloadSVG();g('#copydown').innerHTML=copydownSVG();renewSearch();g('#stext').focus();function removeDuplicates(array){return[...new Set(array)]}
function getTags(str){return[...new Set(str.toLowerCase().match(/#[^\s#]\w+/g))]}
function trashSVG(){return'<svg style="transform: scale(.8);" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg>'}
function shareSVG(){return'<svg style="transform: scale(.8);" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 18.5088C1 13.1679 4.90169 8.77098 9.99995 7.84598V5.51119C9.99995 3.63887 12.1534 2.58563 13.6313 3.73514L21.9742 10.224C23.1323 11.1248 23.1324 12.8752 21.9742 13.7761L13.6314 20.2649C12.1534 21.4144 10 20.3612 10 18.4888V16.5189C7.74106 16.9525 5.9625 18.1157 4.92778 19.6838C4.33222 20.5863 3.30568 20.7735 2.55965 20.5635C1.80473 20.3511 1.00011 19.6306 1 18.5088ZM12.4034 5.31385C12.2392 5.18613 11.9999 5.30315 11.9999 5.51119V9.41672C11.9999 9.55479 11.8873 9.66637 11.7493 9.67008C8.09094 9.76836 4.97774 12.0115 3.66558 15.1656C3.46812 15.6402 3.31145 16.1354 3.19984 16.6471C3.07554 17.217 3.00713 17.8072 3.00053 18.412C3.00018 18.4442 3 18.4765 3 18.5088C3.00001 18.6437 3.18418 18.6948 3.25846 18.5822C3.27467 18.5577 3.29101 18.5332 3.30747 18.5088C3.30748 18.5088 3.30746 18.5088 3.30747 18.5088C3.63446 18.0244 4.01059 17.5765 4.42994 17.168C4.71487 16.8905 5.01975 16.6313 5.34276 16.3912C7.05882 15.1158 9.28642 14.3823 11.7496 14.3357C11.8877 14.3331 12 14.4453 12 14.5834V18.4888C12 18.6969 12.2393 18.8139 12.4035 18.6862L20.7463 12.1973C20.875 12.0973 20.875 11.9028 20.7463 11.8027L12.4034 5.31385Z" fill="#0F1729"></path></svg>'}
function gearSVG(){return'<svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 1920 1920" xmlns="http://www.w3.org/2000/svg"><path d="M1703.534 960c0-41.788-3.84-84.48-11.633-127.172l210.184-182.174-199.454-340.856-265.186 88.433c-66.974-55.567-143.323-99.389-223.85-128.415L1158.932 0h-397.78L706.49 269.704c-81.43 29.138-156.423 72.282-223.962 128.414l-265.073-88.32L18 650.654l210.184 182.174C220.39 875.52 216.55 918.212 216.55 960s3.84 84.48 11.633 127.172L18 1269.346l199.454 340.856 265.186-88.433c66.974 55.567 143.322 99.389 223.85 128.415L761.152 1920h397.779l54.663-269.704c81.318-29.138 156.424-72.282 223.963-128.414l265.073 88.433 199.454-340.856-210.184-182.174c7.793-42.805 11.633-85.497 11.633-127.285m-743.492 395.294c-217.976 0-395.294-177.318-395.294-395.294 0-217.976 177.318-395.294 395.294-395.294 217.977 0 395.294 177.318 395.294 395.294 0 217.976-177.317 395.294-395.294 395.294" fill-rule="evenodd"></path></svg>'}
function downloadSVG(){return'<svg style="height: 100%; cursor: pointer;" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="Interface / Download"><path id="Vector" d="M6 21H18M12 3V17M12 17L17 12M12 17L7 12" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>'}
function pencilSVG(){return'<svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.65661 17L6.99975 17L6.99975 14M6.10235 14.8974L17.4107 3.58902C18.1918 2.80797 19.4581 2.80797 20.2392 3.58902C21.0202 4.37007 21.0202 5.6364 20.2392 6.41745L8.764 17.8926C8.22794 18.4287 7.95992 18.6967 7.6632 18.9271C7.39965 19.1318 7.11947 19.3142 6.8256 19.4723C6.49475 19.6503 6.14115 19.7868 5.43395 20.0599L3 20.9998L3.78312 18.6501C4.05039 17.8483 4.18403 17.4473 4.3699 17.0729C4.53497 16.7404 4.73054 16.424 4.95409 16.1276C5.20582 15.7939 5.50466 15.4951 6.10235 14.8974Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>'}
function checkmarkSVG(){return'<svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 12.6111L8.92308 17.5L20 6.5" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>'}
function pullupSVG(){return'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevrons-down"><polyline points="7 13 12 18 17 13"></polyline><polyline points="7 6 12 11 17 6"></polyline></svg>'}
function copydownSVG(){return'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevrons-down"><polyline points="7 13 12 18 17 13"></polyline><polyline points="7 6 12 11 17 6"></polyline></svg>'}
function downloadSVG(){return'<svg style="height: 100%; cursor: pointer;" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="Interface / Download"><path id="Vector" d="M6 21H18M12 3V17M12 17L17 12M12 17L7 12" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></g></svg>'}
function closeSVG(){return'<svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="Menu / Close_SM"><path id="Vector" d="M16 16L12 12M12 12L8 8M12 12L16 8M12 12L8 16" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>'}
function processor(title,text,classes=""){text=escapeHTML(text);let creolizedtext=creolize(text,!1);title=escapeHTML(title);if(text.trim()==="0"&&classes==="preview tag"){creolizedtext="<div style='height:0em;'>0</div><div><a class='trashtag' onclick='event.preventDefault();event.stopPropagation();deleteTag(\""+title+"\")');return false;'>"+trashSVG()+"</a></div>"}else{}
return"<div class='"+classes+"' onclick='view(this)'>"+"<div class='inner'><h2 class='posttitle'>"+title+"</h2><div class='posttext'>"+creolizedtext+"</div><div class='postraw hide'>"+text+"</div></div></div>"}
function tagstyle(text){return text.replaceAll(/(#[^\s^#^0-9]\w+)/g,"<span class='tagstyle'>$1</span>")}
function creolize(text,links=!0){text="\n"+text;let regex=/^(=+)(.*)=*$/gm;text=text.replace(regex,function(match,equals,title){return"<h"+equals.length+">"+title+"</h"+equals.length+">"});if(links){text=text.replaceAll(/(?<=\s|^)(#(?!\d+(?!\w))[\w-]+)(?![^[]*]])/g,"<a onclick=\"g('#viewbox').classList.add('hide');g('#stext').value='$1 ';renewSearch();\">$1</a>");text=text.replaceAll(/(?<=\s|^)(@(?!\d+(?!\w))[\w-]+)(?![^[]*]])/g,"<a onclick=\"g('#viewbox').classList.add('hide');g('#stext').value='#'+'$1'.substring(1) + ' ';renewSearch();\">$1</a>");text=text.replace(/\[\[([^\]]+)\]\]/g,createLink);text=text.replaceAll(/\b(https?:\/\/\S+)/gi,"<a target='_blank' href='$1'>$1</a>")}else{text=text.replaceAll(/(?<=\s|^)(#(?!\d+(?!\w))[\w-]+)(?![^[]*]])/gi,"<u>$1</u>");text=text.replaceAll(/(?<=\s|^)(@(?!\d+(?!\w))[\w-]+)(?![^[]*]])/gi,"<u>$1</u>");text=text.replace(/\[\[([^\]]+)\]\]/g,"<b><u>$1</u></b>");text=text.replaceAll(/\b(https?:\/\/\S+)/gi,"<u>$1</u>")}
text=text.replaceAll(/^\*\*\*\*\*\*\*\*\s(.*)$/gm,"<ul><ul><ul><ul><ul><ul><ul><ul><li>$1</li></ul></ul></ul></ul></ul></ul></ul></ul>");text=text.replaceAll(/^\#\#\#\#\#\#\#\#\s(.*)$/gm,"<ol><ol><ol><ol><ol><ol><ol><ol><li>$1</li></ol></ol></ol></ol></ol></ol></ol></ol>");text=text.replaceAll("</ul></ul></ul></ul></ul></ul></ul></ul>\n<ul><ul><ul><ul><ul><ul><ul><ul>","");text=text.replaceAll("</ol></ol></ol></ol></ol></ol></ol></ol>\n<ol><ol><ol><ol><ol><ol><ol><ol>","");text=text.replaceAll(/^\*\*\*\*\*\*\*\s(.*)$/gm,"<ul><ul><ul><ul><ul><ul><ul><li>$1</li></ul></ul></ul></ul></ul></ul></ul>");text=text.replaceAll(/^\#\#\#\#\#\#\#\s(.*)$/gm,"<ol><ol><ol><ol><ol><ol><ol><li>$1</li></ol></ol></ol></ol></ol></ol></ol>");text=text.replaceAll("</ul></ul></ul></ul></ul></ul></ul>\n<ul><ul><ul><ul><ul><ul><ul>","");text=text.replaceAll("</ol></ol></ol></ol></ol></ol></ol>\n<ol><ol><ol><ol><ol><ol><ol>","");text=text.replaceAll(/^\*\*\*\*\*\*\s(.*)$/gm,"<ul><ul><ul><ul><ul><ul><li>$1</li></ul></ul></ul></ul></ul></ul>");text=text.replaceAll(/^\#\#\#\#\#\#\s(.*)$/gm,"<ol><ol><ol><ol><ol><ol><li>$1</li></ol></ol></ol></ol></ol></ol>");text=text.replaceAll("</ul></ul></ul></ul></ul></ul>\n<ul><ul><ul><ul><ul><ul>","");text=text.replaceAll("</ol></ol></ol></ol></ol></ol>\n<ol><ol><ol><ol><ol><ol>","");text=text.replaceAll(/^\*\*\*\*\*\s(.*)$/gm,"<ul><ul><ul><ul><ul><li>$1</li></ul></ul></ul></ul></ul>");text=text.replaceAll(/^\#\#\#\#\#\s(.*)$/gm,"<ol><ol><ol><ol><ol><li>$1</li></ol></ol></ol></ol></ol>");text=text.replaceAll("</ul></ul></ul></ul></ul>\n<ul><ul><ul><ul><ul>","");text=text.replaceAll("</ol></ol></ol></ol></ol>\n<ol><ol><ol><ol><ol>","");text=text.replaceAll(/^\*\*\*\*\s(.*)$/gm,"<ul><ul><ul><ul><li>$1</li></ul></ul></ul></ul>");text=text.replaceAll(/^\#\#\#\#\s(.*)$/gm,"<ol><ol><ol><ol><li>$1</li></ol></ol></ol></ol>");text=text.replaceAll("</ul></ul></ul></ul>\n<ul><ul><ul><ul>","");text=text.replaceAll("</ol></ol></ol></ol>\n<ol><ol><ol><ol>","");text=text.replaceAll(/^\*\*\*\s(.*)$/gm,"<ul><ul><ul><li>$1</li></ul></ul></ul>");text=text.replaceAll(/^\#\#\#\s(.*)$/gm,"<ol><ol><ol><li>$1</li></ol></ol></ol>");text=text.replaceAll("</ul></ul></ul>\n<ul><ul><ul>","");text=text.replaceAll("</ol></ol></ol>\n<ol><ol><ol>","");text=text.replaceAll(/^\*\*\s(.*)$/gm,"<ul><ul><li>$1</li></ul></ul>");text=text.replaceAll(/^\#\#\s(.*)$/gm,"<ol><ol><li>$1</li></ol></ol>");text=text.replaceAll("</ul></ul>\n<ul><ul>","");text=text.replaceAll("</ol></ol>\n<ol><ol>","");text=text.replaceAll(/^\*\s(.*)$/gm,"<ul><li>$1</li></ul>");text=text.replaceAll("</ul>\n<ul>","");text=text.replaceAll(/^\#\s(.*)$/gm,"<ol><li>$1</li></ol>");text=text.replaceAll("</ol>\n<ol>","");text=text.replaceAll("</ul>\n","</ul>");text=text.replaceAll("</ol>\n","</ol>");text=text.replaceAll(/\*\*(.*?)\*\*/g,"<strong>$1</strong>");text=text.replaceAll(/(?<!http:)(?<!https:)\/\/(.+?)\/\//g,"<em>$1</em>");text=text.replaceAll(/^----+$/gm,'\n<hr>');text=text.slice(1);text=text.replaceAll("\n",'<br>');text=text.replaceAll("\\\\",'<br>');return text}
function edithome(){g("#homeview").classList.add("hide");g("#homeedit").classList.remove("hide")}
function updatehome(){change();home=unescapeHTML(g('#homeedittext').value);g('#homebody').innerHTML=creolize(escapeHTML(home));g("#homeview").classList.remove("hide");g("#homeedit").classList.add("hide")}
function savesettings(){change();filename=escapeHTML(g('#settingsfilename').value);g('#settings').classList.add('hide');return!1}
function search(terms){g('#home').classList.add('hide');terms=terms.split(/\s+/);terms=terms.filter((el)=>{return el.length>0});let onlytags=!0;terms.forEach((el)=>{if(!el.startsWith('-#')&&!el.startsWith('#')){onlytags=!1;return}});let html="";titles=[];texts=[];sloppy=[];tagsearch=[];tagresults=[];let lastterm=terms[terms.length-1];if(g('#stext').value.length==0){g('#home').classList.remove('hide');g('#homebody').innerHTML=creolize(escapeHTML(home))}else if(onlytags&&!g('#stext').value.endsWith(' ')){g('#home').classList.add('hide');if(terms.length>1){tagsearch=posts;for(var i=0;i<terms.length;i++){tagsearch=tagsearch.filter((el)=>{let wholetext=el.title+' '+el.text;wholetext=wholetext.toLowerCase();return wholetext.includes(terms[i].toLowerCase())})}
let tagSet=new Set();for(var i=0;i<tagsearch.length;i++){let wholetext=tagsearch[i].title+' '+tagsearch[i].text;wholetext=wholetext.toLowerCase();getTags(wholetext).forEach((el)=>tagSet.add(el))}
tagresults=[];tagSet.forEach((el)=>{for(var i=0;i<tags.length;i++){if(tags[i].tag.toLowerCase()==el.toLowerCase()){if(!getTags(g('#stext').value.toLowerCase()).includes(tags[i].tag.toLowerCase())){if(tags[i].tag.startsWith(lastterm)){tagresults.push(tags[i])}}}}})}else{g('#home').classList.add('hide');for(var i=0;i<tags.length;i++){if(tags[i].tag.startsWith(lastterm)){tagresults.push(tags[i])}}}}else{g('#home').classList.add('hide');let nterms=[];for(var i=terms.length;i>1;i--){if(terms[i-1].startsWith("-")){if(terms[i-1].length>1){nterms.push(terms[i-1].substring(1))}
terms.splice(i-1,1)}}
for(let i=0;i<posts.length;i++){let wholetext=posts[i].title+' '+posts[i].text;wholetext=wholetext.toLowerCase();if(terms.every(el=>posts[i].title.toLowerCase().includes(el.toLowerCase()))){if(!nterms.some(el=>wholetext.toLowerCase().includes(el.toLowerCase()))){titles.push(posts[i])}}else if(terms.every(el=>wholetext.toLowerCase().includes(el.toLowerCase()))){if(!nterms.some(el=>wholetext.toLowerCase().includes(el.toLowerCase()))){texts.push(posts[i])}}else if(terms.some(el=>wholetext.toLowerCase().includes(el.toLowerCase()))){if(!nterms.some(el=>wholetext.toLowerCase().includes(el.toLowerCase()))){sloppy.push(posts[i])}}}
titles.forEach((el)=>{html+=processor(el.title,el.text,"preview title")});texts.forEach((el)=>{html+=processor(el.title,el.text,"preview text")});sloppy.forEach((el)=>{html+=processor(el.title,el.text,"preview sloppy hide")});if(sloppy.length>0){html+="<a id='more' style='cursor:pointer;' onclick=\"this.style.display='none';gg('.sloppy').forEach((el)=>{el.style.display='block';});\">more...</a>"}}
tagresults.forEach((el)=>{html+=processor(el.tag," "+el.count,"preview tag")});if(terms.length==1&&getTags(g('#stext').value).length==terms.length){if(titles.length<1&&sloppy.length<1&&texts.length<1&&tagresults.length<1){for(var i=0;i<tags.length;i++){if(tags[i].tag==lastterm){html+="<div id='notag'><b>No results.</b> <a onclick='deleteTag(\""+lastterm+"\");'>Delete the "+lastterm+" tag?</a></div>";break}}}}
g("#results").innerHTML=html;g('#sclear').style.color=g('#stext').value==""?"#BBB":"#000";console.log("search");return!1}
function renewSearch(){search(g("#stext").value)}
function change(){if(allowsave){changed=!0;g('#save').innerHTML=checkmarkSVG()}}
function editing(){g('#close1').classList.add('hide');g('#checkmark').classList.remove('hide');g('#close2').classList.remove('hide')}
function chooseLink(item){g('#settings').classList.add('hide');select(item.title)}
function post(text){change();text=text.trim();let posttags=getTags(text);console.log("Tags: "+posttags);let posttitle;if(text.indexOf("\\\\")>-1){posttitle=text.substr(0,text.indexOf("\\\\")).trim();text=text.substr(text.indexOf("\\\\")+2).trim();text.replaceAll('\\\\','\n')}else{text=text.replaceAll(/^((#[^\s^#^0-9]\w+\s*)+)(.*)/g,"$3 $1");posttitle=text.trim();text=""}
for(var i=0;i<posts.length;i++){if(posts[i].title.toLowerCase()==posttitle.toLowerCase()){if(posts[i].text!=text){post(posttitle+" #duplicate\\\\"+text);return posttitle+" #duplicate"}else{return}}}
posts.push({"title":posttitle,"text":text});posttags.forEach((posttag)=>{let found=!1;for(var i=0;i<tags.length;i++){if(posttag==tags[i].tag){found=!0;tags[i].count=tags[i].count+1;break}}
if(!found){tags.push({"tag":posttag,"count":1})}});search(g("#stext").value);g('#atext').value="";return!1}
function remove(title){for(var i=0;i<posts.length;i++){if(posts[i].title==unescapeHTML(title)){if(confirm('Are you sure you want to delete this note?')){let delTags=getTags(posts[i].title+' '+posts[i].text);delTags.forEach((tag)=>{let found=!1;for(var i=0;i<tags.length;i++){if(tag==tags[i].tag){found=!0;if(tags[i].count>0){tags[i].count=tags[i].count-1}
break}}});posts.splice(i,1);change();g('#viewbox').classList.add('hide')
g('#viewtitle').innerHTML='';g('#viewtext').innerHTML='';renewSearch()}
return!1}}
alert('Error: match not found for '+title+'.');return!1}
function select(title){for(var i=0;i<posts.length;i++){if(posts[i].title==unescapeHTML(title)){g('#viewtitle').innerHTML=escapeHTML(posts[i].title);g('#viewtext').innerHTML=creolize(escapeHTML(posts[i].text));g('#viewraw').innerHTML=escapeHTML(posts[i].text);g('#viewbox').classList.remove('hide');g('#viewbox').scrollTop=0;return!1}}
post(title+"\\\\");return select(title)}
function view(obj){if(obj&&obj.classList&&obj.classList.contains('tag')){let sTags=g('#stext').value.split(/\s+/);sTags=sTags.filter((el)=>{return el.length>0});g('#stext').value=sTags.slice(0,-1).join(' ')+((sTags.length>1)?' ':'')+g('.posttitle',obj).innerHTML+' ';renewSearch()
g('#stext').focus()}else{g('#viewtitle').innerHTML=g('.posttitle',obj).innerHTML;g('#viewtext').innerHTML=creolize(g('.postraw',obj).innerHTML);g('#viewraw').innerHTML=g('.postraw',obj).innerHTML;g('#viewbox').classList.remove('hide');g('#viewbox').scrollTop=0}}
function edit(){g('#checkmark').classList.add('hide');g('#close1').classList.remove('hide');g('#close2').classList.add('hide');g('#edittitle').value=unescapeHTML(g('#viewtitle').innerHTML);g('#edittext').value=unescapeHTML(g('#viewraw').innerHTML);g('#editbox').classList.remove('hide')}
function update(title,ntitle,text,ntext){change();title=unescapeHTML(title);if(title!=ntitle){if(!posts.every((post)=>{return ntitle.toLowerCase()!==post.title.toLowerCase()})){if(confirm("Sorry, the title '"+ntitle+"' is already taken. \n\n Revert back to original title? \n")){g('#edittitle').value=unescapeHTML(g('#viewtitle').innerHTML);return!1}else{return!1}}}
for(var i=0;i<posts.length;i++){if(posts[i].title==title){let beginTags=getTags(posts[i].title+' '+posts[i].text);let endTags=getTags(ntitle+' '+ntext);let delTags=beginTags.filter(x=>!endTags.includes(x));let addTags=endTags.filter(x=>!beginTags.includes(x));let found=!1;addTags.forEach((tag)=>{found=!1;for(var i=0;i<tags.length;i++){if(tag==tags[i].tag){found=!0;tags[i].count=tags[i].count+1;break}}
if(!found){tags.push({"tag":tag,"count":1})}});delTags.forEach((tag)=>{found=!1;for(var i=0;i<tags.length;i++){if(tag==tags[i].tag){found=!0;if(tags[i].count>0){tags[i].count=tags[i].count-1}
break}}});posts[i].title=ntitle;posts[i].text=ntext;g('.checkmark').classList.add('hide');g('#viewtitle').innerHTML=escapeHTML(g('#edittitle').value);g('#viewtext').innerHTML=creolize(escapeHTML(g('#edittext').value));g('#viewraw').innerHTML=escapeHTML(g('#edittext').value);g('#editbox').classList.add('hide');return!1}}}
function duplicate(){let dup_title=unescapeHTML(g('#viewtitle').innerHTML);let dup_text=unescapeHTML(g('#viewraw').innerHTML);post(dup_title+" #duplicate\\\\"+dup_text);linkClick(dup_title+" #duplicate")}
function deleteTag(term){if(confirm("Are you sure you want to delete the tag "+term+"?")){for(var i=0;i<tags.length;i++){if(tags[i].tag==term){tags.splice(i,1);change();renewSearch();return!1}}
alert("Error: Tag not found.")}
return!1}
function closeEdit(){if(!g('#checkmark').classList.contains('hide')){if(confirm('Are you sure you want to discard changes?')){g('#editbox').classList.add('hide')}}else{g('#editbox').classList.add('hide')}}
function settings(e){e.preventDefault();g('#settings').classList.remove('hide');g('#exporting').innerHTML="all your posts";if(g('#stext').value.length>0){if(texts.length>0||titles.length>0){g('#exporting').innerHTML="\""+g("#stext").value.trim()+"\""}else{g('#exporting').innerHTML="no matches"}}
g('#exporttext').innerHTML="";let exports=titles.concat(texts);if(g("#stext").value.length>0){g("#exporttext").innerHTML=JSON.stringify(exports)+"\n"}else{g("#exporttext").innerHTML=JSON.stringify(posts)+"\n"}
g('#settings').classList.remove('hide');return!1}
function addtags(e){e.preventDefault();let searchtags=getTags(g('#stext').value).join(' ');if(g('#atext').value.length>0){g('#atext').value+=' '}
if(searchtags.length>0){g('#atext').value+=searchtags+' '}else{g('#atext').value+='#'}
g('#atext').focus();return!1}
function renameTags(){let oldtag=g('#settingsoldtag').value.trim()
let newtag=g('#settingsnewtag').value.trim()
if(oldtag==""||newtag==""){alert("Must fill in both input boxes.");return!1}
if(oldtag[0]!='#'){oldtag='#'+oldtag}
if(newtag[0]!='#'){newtag='#'+newtag}
if(oldtag==newtag){alert("Cannot replace a tag with itself.")
return!1}
let tagRegex=/^#(?!\d+(?!\w))[\w-]+$/;if((oldtag.match(tagRegex)||[]).length>0&&(newtag.match(tagRegex)||[]).length>0){}else{alert("These must be formatted like proper hashtags.");return!1}
let oldtagRegex=new RegExp(`(?<![\\w/])${oldtag}(?!\\w)`,'gi');let newtagRegex=new RegExp(`(?<![\\w/])${newtag}(?!\\w)`,'gi');let new_tag_exists=!1;let oldcount=0;let newcount=0;let old_index=-1;let new_index=-1;for(var i=0;i<tags.length;i++){if(tags[i].tag.match(newtagRegex)){new_tag_exists=!0;newcount=Number(tags[i].count);new_index=i}
if(tags[i].tag.match(oldtagRegex)){oldcount=Number(tags[i].count);old_index=i}}
if(new_tag_exists){if(oldcount>=0){newcount+=oldcount}
for(var i=0;i<posts.length;i++){let full_text=posts[i].title+" "+posts[i].text;if((full_text.match(oldtagRegex)||[]).length>0&&(full_text.match(newtagRegex)||[]).length>0){newcount-=1}
posts[i].title=posts[i].title.replace(oldtagRegex,newtag);posts[i].text=posts[i].text.replace(oldtagRegex,newtag)}
tags[new_index].count=newcount;if(old_index>=0){tags.splice(old_index,1)}}else{for(var i=0;i<tags.length;i++){tags[i].tag=tags[i].tag.replace(oldtagRegex,newtag)}
for(var i=0;i<posts.length;i++){posts[i].title=posts[i].title.replace(oldtagRegex,newtag);posts[i].text=posts[i].text.replace(oldtagRegex,newtag)}}
oldtag='@'+oldtag.slice(1);newtag='@'+newtag.slice(1);oldtagRegex=new RegExp(`(?<![\\w/])${oldtag}(?!\\w)`,'gi');newtagRegex=new RegExp(`(?<![\\w/])${newtag}(?!\\w)`,'gi');for(var i=0;i<posts.length;i++){posts[i].title=posts[i].title.replace(oldtagRegex,newtag);posts[i].text=posts[i].text.replace(oldtagRegex,newtag)}
change();renewSearch();oldtag='#'+oldtag.slice(1);newtag='#'+newtag.slice(1);alert("All instances of '"+oldtag+"' have been replaced with '"+newtag+"'!")}
function validateNoteArray(arr){return Array.isArray(arr)&&arr.every(note=>note.hasOwnProperty('title')&&note.hasOwnProperty('text'))}
function readFileAsync(file){return new Promise((resolve,reject)=>{const reader=new FileReader();reader.onload=(e)=>resolve(e.target.result);reader.onerror=(e)=>reject(new Error('File read failed'));reader.readAsText(file)})}
async function importNotes(){let importf=g('#importfile');let importt=g('#importtext');if(importf.value==""&&importt.value.trim()==""){alert("No JSON data to be imported. Aborted.");return!1}
let narr=[];if(importf.value!=""){try{const file=importf.files[0];const contents=await readFileAsync(file);narr=JSON.parse(contents)}catch(e){alert("Error processing file: "+e.message);return!1}}
if(importt.value.trim()!=""){try{narr=JSON.parse(importt.value.trim())}catch(e){alert("Error! The pasted text was not in the JSON format.");return!1}}
if(!validateNoteArray(narr)){alert("Error! The data is in the wrong format.");return!1}
for(const note of narr){post(note.title+" \\\\ "+note.text)}
alert(narr.length+" posts successfully imported!\n\nAny duplicates are marked #duplicate.")}
function exportWiki(){if(confirm('Exporting: '+filename+'.json')){return downloadJSON()}else{return!1}
return!1}
function downloadJSON(){var html="";var exports=titles.concat(texts);if(g("#stext").value.length>0){html=JSON.stringify(exports)+"\n"}else{html=JSON.stringify(posts)+"\n"}
var element=document.createElement('a');element.style.display='none';element.setAttribute('href','data:text/plain;charset=utf-8,'+encodeURIComponent(html));element.setAttribute('download',filename+'.json');document.body.appendChild(element);element.click();document.body.removeChild(element);return!1}
function saveWiki(){if(changed){changed=!1;g('#save').innerHTML=downloadSVG();localStorage.setItem("home",home);localStorage.setItem("filename",filename);localStorage.setItem("posts",JSON.stringify(posts));localStorage.setItem("tags",JSON.stringify(tags));return!1}else{if(confirm('Downloading: '+filename)){return download()}else{return!1}}
return!1}
function download(){var html="<!DOCTYPE html>\n<html lang=\"en\">\n"+document.head.outerHTML+"\n<body>\n";html+="<div id='data' class='hide'>";html+="<scr"+"ipt>\n";html+="let home = "+JSON.stringify(home)+";\n";html+="let filename = "+JSON.stringify(filename)+";\n";html+="let posts = "+JSON.stringify(posts)+";\n";html+="let tags = "+JSON.stringify(tags)+";\n";html+="</scr"+"ipt>\n";html+="</div>\n";g("#homebody").innerHTML="";g("#viewtitle").innerHTML="";g("#viewtext").innerHTML="";g("#viewraw").innerHTML="";g("#results").innerHTML="";g("#edittitle").value="";g("#edittext").value="";g("#exporttext").innerHTML="";g("#exporting").innerHTML="all your posts";html+=g(".tbar").outerHTML;html+=g("#main").outerHTML;html+=g(".bbar").outerHTML;html+=g("#viewbox").outerHTML;html+=g("#editbox").outerHTML;html+=g("#settings").outerHTML;html+=g("#scripts").outerHTML;html+="\n</body>\n</html>\n";var element=document.createElement('a');element.style.display='none';element.setAttribute('href','data:text/plain;charset=utf-8,'+encodeURIComponent(html));element.setAttribute('download',filename);document.body.appendChild(element);element.click();document.body.removeChild(element);renewSearch();return!1}</script></div>
</body>
</html>
